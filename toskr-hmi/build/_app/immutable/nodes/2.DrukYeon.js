var Kt=Object.defineProperty;var Vt=Object.getPrototypeOf;var Zt=Reflect.get;var ct=r=>{throw TypeError(r)};var Qt=(r,e,t)=>e in r?Kt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ut=(r,e,t)=>Qt(r,typeof e!="symbol"?e+"":e,t),qe=(r,e,t)=>e.has(r)||ct("Cannot "+t);var f=(r,e,t)=>(qe(r,e,"read from private field"),t?t.call(r):e.get(r)),P=(r,e,t)=>e.has(r)?ct("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),V=(r,e,t,a)=>(qe(r,e,"write to private field"),a?a.call(r,t):e.set(r,t),t),N=(r,e,t)=>(qe(r,e,"access private method"),t);var dt=(r,e,t,a)=>({set _(n){V(r,e,n,t)},get _(){return f(r,e,a)}}),ft=(r,e,t)=>Zt(Vt(r),t,e);import{t as L,s as ze,a as z,c as St,d as $t,e as er}from"../chunks/_GjLXgwK.js";import{s as Ue,h as re,a9 as tr,ab as rr,a as ar,b as nr,m as u,J as sr,c as ir,r as vt,d as Ye,g as ye,ah as or,e as kt,f as Tt,p as lr,at as Ot,al as Ct,a7 as cr,O as Le,au as Z,av as Ge,F as ur,a6 as ht,aw as rt,ax as dr,ay as at,az as pt,aA as fr,ak as vr,aB as hr,ao as pr,aC as gr,af as mr,C as yr,l as It,a8 as wr,N as _,v as pe,aD as Xe,aE as br,z as A,B as F,A as C,x as ke,y as ge,o as we,aF as _r,Z as M,M as Pt,a2 as xe,aG as xr,j as Ke,aH as gt,aI as Er,Y as nt,w as Te,an as Sr,aJ as kr}from"../chunks/Cv2XWkrT.js";import{i as $}from"../chunks/CeFvMfNe.js";import{d as Qe,b as Tr,e as Or,S as Cr,a as At,W as se}from"../chunks/1y3tKbTT.js";import{i as Ir}from"../chunks/BAhRAQyU.js";import{p as te,r as jt,b as mt}from"../chunks/C1hKYBjo.js";function Rt(r,e){return e}function Pr(r,e,t,a){for(var n=[],s=e.length,i=0;i<s;i++)fr(e[i].e,n,!0);var o=s>0&&n.length===0&&t!==null;if(o){var l=t.parentNode;vr(l),l.append(t),a.clear(),Q(r,e[0].prev,e[s-1].next)}hr(n,()=>{for(var h=0;h<s;h++){var v=e[h];o||(a.delete(v.k),Q(r,v.prev,v.next)),pr(v.e,!o)}})}function zt(r,e,t,a,n,s=null){var i=r,o={flags:e,items:new Map,first:null},l=(e&Ot)!==0;if(l){var h=r;i=re?Ue(tr(h)):h.appendChild(rr())}re&&ar();var v=null,m=!1,c=sr(()=>{var p=t();return cr(p)?p:p==null?[]:Ct(p)});nr(()=>{var p=u(c),d=p.length;if(m&&d===0)return;m=d===0;let g=!1;if(re){var b=i.data===ir;b!==(d===0)&&(i=vt(),Ue(i),Ye(!1),g=!0)}if(re){for(var x=null,O,k=0;k<d;k++){if(ye.nodeType===8&&ye.data===or){i=ye,g=!0,Ye(!1);break}var y=p[k],w=a(y,k);O=Lt(ye,o,x,null,y,w,k,n,e,t),o.items.set(w,O),x=O}d>0&&Ue(vt())}re||Ar(p,o,i,n,e,a,t),s!==null&&(d===0?v?kt(v):v=Tt(()=>s(i)):v!==null&&lr(v,()=>{v=null})),g&&Ye(!0),u(c)}),re&&(i=ye)}function Ar(r,e,t,a,n,s,i){var J,W,S,q;var o=(n&dr)!==0,l=(n&(at|rt))!==0,h=r.length,v=e.items,m=e.first,c=m,p,d=null,g,b=[],x=[],O,k,y,w;if(o)for(w=0;w<h;w+=1)O=r[w],k=s(O,w),y=v.get(k),y!==void 0&&((J=y.a)==null||J.measure(),(g??(g=new Set)).add(y));for(w=0;w<h;w+=1){if(O=r[w],k=s(O,w),y=v.get(k),y===void 0){var X=c?c.e.nodes_start:t;d=Lt(X,e,d,d===null?e.first:d.next,O,k,w,a,n,i),v.set(k,d),b=[],x=[],c=d.next;continue}if(l&&jr(y,O,w,n),(y.e.f&Ge)!==0&&(kt(y.e),o&&((W=y.a)==null||W.unfix(),(g??(g=new Set)).delete(y))),y!==c){if(p!==void 0&&p.has(y)){if(b.length<x.length){var T=x[0],H;d=T.prev;var ne=b[0],j=b[b.length-1];for(H=0;H<b.length;H+=1)yt(b[H],T,t);for(H=0;H<x.length;H+=1)p.delete(x[H]);Q(e,ne.prev,j.next),Q(e,d,ne),Q(e,j,T),c=T,d=j,w-=1,b=[],x=[]}else p.delete(y),yt(y,c,t),Q(e,y.prev,y.next),Q(e,y,d===null?e.first:d.next),Q(e,d,y),d=y;continue}for(b=[],x=[];c!==null&&c.k!==k;)(c.e.f&Ge)===0&&(p??(p=new Set)).add(c),x.push(c),c=c.next;if(c===null)continue;y=c}b.push(y),d=y,c=y.next}if(c!==null||p!==void 0){for(var R=p===void 0?[]:Ct(p);c!==null;)(c.e.f&Ge)===0&&R.push(c),c=c.next;var E=R.length;if(E>0){var I=(n&Ot)!==0&&h===0?t:null;if(o){for(w=0;w<E;w+=1)(S=R[w].a)==null||S.measure();for(w=0;w<E;w+=1)(q=R[w].a)==null||q.fix()}Pr(e,R,I,v)}}o&&ur(()=>{var Ae;if(g!==void 0)for(y of g)(Ae=y.a)==null||Ae.apply()}),ht.first=e.first&&e.first.e,ht.last=d&&d.e}function jr(r,e,t,a){(a&at)!==0&&pt(r.v,e),(a&rt)!==0?pt(r.i,t):r.i=t}function Lt(r,e,t,a,n,s,i,o,l,h){var v=(l&at)!==0,m=(l&gr)===0,c=v?m?Le(n):Z(n):n,p=(l&rt)===0?i:Z(i),d={i:p,v:c,k:s,a:null,e:null,prev:t,next:a};try{return d.e=Tt(()=>o(r,c,p,h),re),d.e.prev=t&&t.e,d.e.next=a&&a.e,t===null?e.first=d:(t.next=d,t.e.next=d.e),a!==null&&(a.prev=d,a.e.prev=d.e),d}finally{}}function yt(r,e,t){for(var a=r.next?r.next.e.nodes_start:t,n=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==a;){var i=mr(s);n.before(s),s=i}}function Q(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}var ee,oe,Oe,Me,Dt;const He=class He{constructor(e){P(this,Me);P(this,ee,new WeakMap);P(this,oe);P(this,Oe);V(this,Oe,e)}observe(e,t){var a=f(this,ee).get(e)||new Set;return a.add(t),f(this,ee).set(e,a),N(this,Me,Dt).call(this).observe(e,f(this,Oe)),()=>{var n=f(this,ee).get(e);n.delete(t),n.size===0&&(f(this,ee).delete(e),f(this,oe).unobserve(e))}}};ee=new WeakMap,oe=new WeakMap,Oe=new WeakMap,Me=new WeakSet,Dt=function(){return f(this,oe)??V(this,oe,new ResizeObserver(e=>{for(var t of e){He.entries.set(t.target,t);for(var a of f(this,ee).get(t.target)||[])a(t)}}))},ut(He,"entries",new WeakMap);let $e=He;var Rr=new $e({box:"border-box"});function wt(r,e,t){var a=Rr.observe(r,()=>t(r[e]));yr(()=>(It(()=>t(r[e])),a))}function zr(r,e,t,a,n){var s=()=>{a(t[r])};t.addEventListener(e,s),s(),(t===document.body||t===window||t===document)&&wr(()=>{t.removeEventListener(e,s)})}function be(r){_(r,r.v+1)}var Lr=L('<div class="gauge-abs svelte-1fa4a5t"><div class="gauge-max svelte-1fa4a5t"></div></div>'),Dr=L('<div class="gauge svelte-1fa4a5t"><!> <div class="gauge-overflow svelte-1fa4a5t"><div class="gauge-fill gauge-bg svelte-1fa4a5t"></div> <div class="gauge-fill svelte-1fa4a5t"></div> <div class="gauge-white svelte-1fa4a5t"></div> <div class="gauge-value svelte-1fa4a5t"> </div></div></div>');function bt(r,e){pe(e,!1);let t=te(e,"value",8,0),a=te(e,"arrows",8,""),n=te(e,"thresholds",8,"70,90"),s=te(e,"colors",8,"#525C71,#e8523b"),i=Le(),o=Le(),l=Le();Xe(()=>(we(n()),we(t()),we(s())),()=>{const g=String(n()).split(","),b=g.indexOf(g.find(O=>t()<parseInt(O,10))),x=String(s()).split(",");_(i,x[b]||x[x.length-1])}),Xe(()=>we(t()),()=>{_(o,(100-t())*1.8)}),Xe(()=>we(a()),()=>{_(l,a()?String(a()).split(",").map(g=>parseInt(g)*1.8).filter(g=>g>-1):[])}),br(),Ir();var h=Dr(),v=A(h);zt(v,1,()=>u(l),Rt,(g,b)=>{var x=Lr();ke(()=>Qe(x,`transform:rotate(${u(b)??""}deg)`)),z(g,x)});var m=F(v,2),c=F(A(m),2),p=F(c,4),d=A(p,!0);C(p),C(m),C(h),ke(()=>{Qe(c,`transform:rotate(-${u(o)??""}deg);box-shadow: inset 0 0 0 1em ${u(i)??""};`),ze(d,t())}),z(r,h),ge()}const Mr=r=>{const e=r*2,t=e>>16&255,a=e>>8&255,n=e&255;return[t,a,n]},Hr=([r,e,t])=>{const a=(r<<16|e<<8|t)/2;return a%1?0:a},Wr=["filter","shadowBlur","globalCompositeOperation","globalAlpha","fillStyle","strokeStyle"],Nr=(r,e,{rgbToId:t=Hr,idToRgb:a=Mr}={})=>{const n=r.getContext("2d",e),s=new OffscreenCanvas(r.width,r.height),i=s.getContext("2d",{willReadFrequently:!1,alpha:!1});return new Proxy(n,{get(o,l){const{width:h,height:v}=r;if((h!==s.width||v!==s.height)&&(s.width=h,s.height=v),l==="getLayerIdAt")return(c,p)=>{const[d,g,b]=i.getImageData(c,p,1,1).data;return t([d,g,b])};if(l==="setCurrentLayerId")return c=>{const[p,d,g]=a(c),b=`rgb(${p},${d},${g})`;i.fillStyle=b,i.strokeStyle=b};const m=o[l];return typeof m!="function"?m:(...c)=>{let p=l,d=c;return l==="drawImage"&&(p="fillRect",d=c.slice(-4)),i[p](...d),Reflect.apply(m,o,c)}},set(o,l,h){return o[l]=h,Wr.includes(l)||(i[l]=h),!0}})};var Y,G,K,le,De;const st=class st extends Map{constructor(t){super();P(this,le);P(this,Y,new Map);P(this,G,Z(0));P(this,K,Z(0));if(t){for(var[a,n]of t)super.set(a,n);f(this,K).v=super.size}}has(t){var a=f(this,Y),n=a.get(t);if(n===void 0){var s=super.get(t);if(s!==void 0)n=Z(0),a.set(t,n);else return u(f(this,G)),!1}return u(n),!0}forEach(t,a){N(this,le,De).call(this),super.forEach(t,a)}get(t){var a=f(this,Y),n=a.get(t);if(n===void 0){var s=super.get(t);if(s!==void 0)n=Z(0),a.set(t,n);else{u(f(this,G));return}}return u(n),super.get(t)}set(t,a){var m;var n=f(this,Y),s=n.get(t),i=super.get(t),o=super.set(t,a),l=f(this,G);if(s===void 0)n.set(t,Z(0)),_(f(this,K),super.size),be(l);else if(i!==a){be(s);var h=l.reactions===null?null:new Set(l.reactions),v=h===null||!((m=s.reactions)!=null&&m.every(c=>h.has(c)));v&&be(l)}return o}delete(t){var a=f(this,Y),n=a.get(t),s=super.delete(t);return n!==void 0&&(a.delete(t),_(f(this,K),super.size),_(n,-1),be(f(this,G))),s}clear(){if(super.size!==0){super.clear();var t=f(this,Y);_(f(this,K),0);for(var a of t.values())_(a,-1);be(f(this,G)),t.clear()}}keys(){return u(f(this,G)),super.keys()}values(){return N(this,le,De).call(this),super.values()}entries(){return N(this,le,De).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return u(f(this,K)),super.size}};Y=new WeakMap,G=new WeakMap,K=new WeakMap,le=new WeakSet,De=function(){u(f(this,G));var t=f(this,Y);if(f(this,K).v!==t.size)for(var a of ft(st.prototype,this,"keys").call(this))t.has(a)||t.set(a,Z(0));for(var[,n]of f(this,Y))u(n)};let Ee=st;const Br=r=>{if(window.TouchEvent&&r instanceof TouchEvent){const{left:a,top:n}=r.target.getBoundingClientRect(),{clientX:s,clientY:i}=r.changedTouches[0];return{x:s-a,y:i-n}}const{offsetX:e,offsetY:t}=r;return{x:e,y:t}},_t=(r,e)=>{var t,a;r instanceof MouseEvent&&((t=r.target)==null||t.dispatchEvent(new PointerEvent(`layer.pointer${e}`,r)),(a=r.target)==null||a.dispatchEvent(new MouseEvent(`layer.mouse${e}`,r)))},Fr=["onclick","oncontextmenu","ondblclick","onauxclick","onmousedown","onmouseenter","onmouseleave","onmouseup","onmousemove","onwheel","ontouchstart","ontouchcancel","ontouchend","ontouchmove","onpointerenter","onpointerleave","onpointerdown","onpointerup","onpointermove","onpointercancel","onlayer.mouseenter","onlayer.mouseleave","onlayer.pointerenter","onlayer.pointerleave","onfocus","onblur","onfullscreenchange","onfullscreenerror","onscroll","oncut","oncopy","onpaste","onkeydown","onkeypress","onkeyup","onmouseover","onmouseout","onselect","ondrag","ondragend","ondragenter","ondragstart","ondragleave","ondragover","ondrop","onpointerover","onpointerout","ongotpointercapture","onlostpointercapture"],Jr=r=>console.warn("[svelte-canvas] %s",r),Mt=Symbol("register"),qr=r=>_r(Mt)(r);var ce,ue,de,We,Ne,Ce,ae,U,fe,ve,Ie,he,Pe,D,Ht,Wt,Nt,Bt,et,Ft,Jt;class Ur{constructor(e){P(this,D);P(this,ce,new Ee);P(this,ue,new Ee);P(this,de,new Ee);P(this,We,1);P(this,Ne,Date.now());P(this,Ce,M(0));P(this,ae);P(this,U);P(this,fe);P(this,ve);P(this,Ie,M(Pt([])));P(this,he,M(0));P(this,Pe,xe(()=>f(this,de).get(u(f(this,he)))));V(this,U,e),xr(Mt,this.register.bind(this))}init(e,t){V(this,ae,e),N(this,D,Bt).call(this,t),Ke(()=>N(this,D,et).call(this)),Ke(()=>N(this,D,Nt).call(this)),Ke(()=>(u(f(this,Ce)),N(this,D,Ft).call(this))),gt(()=>N(this,D,Jt).call(this))}redraw(){Er(f(this,Ce))}register({setup:e,render:t,...a}){const n=N(this,D,Ht).call(this);return e&&f(this,ce).set(n,e),f(this,ue).set(n,t),Object.keys(a).length&&(f(this,U).layerEvents?f(this,de).set(n,a):Jr("Canvas must have layerEvents={true} in order to use layer-level event handlers")),gt(()=>N(this,D,Wt).call(this,n)),n}createEventHandlers(){const e=n=>{const s=`on${n.type}`,i=f(this,U).handlers[s];i==null||i(n)},t=n=>{const{pixelRatio:s}=f(this,U),{x:i,y:o}=Br(n);if(["touchstart","pointermove"].includes(n.type)){const v=f(this,ae).getLayerIdAt(i*s,o*s);u(f(this,he))!==v&&(_t(n,"leave"),_(f(this,he),v,!0),_t(n,"enter"))}if(!u(f(this,Pe)))return;const l=`on${n.type.replace("layer.","")}`,h=u(f(this,Pe))[l];h==null||h({x:i,y:o,originalEvent:n})},a=n=>{e(n),f(this,U).layerEvents&&t(n)};return Fr.reduce((n,s)=>({...n,[s]:a}),{})}}ce=new WeakMap,ue=new WeakMap,de=new WeakMap,We=new WeakMap,Ne=new WeakMap,Ce=new WeakMap,ae=new WeakMap,U=new WeakMap,fe=new WeakMap,ve=new WeakMap,Ie=new WeakMap,he=new WeakMap,Pe=new WeakMap,D=new WeakSet,Ht=function(){return dt(this,We)._++},Wt=function(e){f(this,ue).delete(e),f(this,de).delete(e)},Nt=function(){const{onresize:e,width:t,height:a,pixelRatio:n}=f(this,U);e==null||e({width:t,height:a,pixelRatio:n})},Bt=function(e){const t=()=>{const a=[...e.children];_(f(this,Ie),a.map(n=>+n.dataset.layerId),!0)};V(this,ve,new MutationObserver(()=>t())),f(this,ve).observe(e,{childList:!0}),t()},et=function(){f(this,U).autoplay?(It(()=>this.redraw()),V(this,fe,requestAnimationFrame(()=>N(this,D,et).call(this)))):cancelAnimationFrame(f(this,fe))},Ft=function(){var l,h,v;const e=f(this,ae),{width:t,height:a,pixelRatio:n,autoclear:s}=f(this,U),i=Date.now()-f(this,Ne),o={context:e,width:t,height:a,time:i};e.setTransform(n,0,0,n,0,0),s&&e.clearRect(0,0,t,a);for(const[m,c]of f(this,ce))c(o),f(this,ce).delete(m);for(const m of u(f(this,Ie)))(h=(l=f(this,ae)).setCurrentLayerId)==null||h.call(l,m),(v=f(this,ue).get(m))==null||v(o)},Jt=function(){var e;typeof window>"u"||((e=f(this,ve))==null||e.disconnect(),cancelAnimationFrame(f(this,fe)))};/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function Yr(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var a,n,s,i,o=[],l=!0,h=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(a=s.call(t)).done)&&(o.push(a.value),o.length!==e);l=!0);}catch(v){h=!0,n=v}finally{try{if(!l&&t.return!=null&&(i=t.return(),Object(i)!==i))return}finally{if(h)throw n}}return o}}function xt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,a)}return t}function B(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xt(Object(t),!0).forEach(function(a){Gr(r,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xt(Object(t)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(t,a))})}return r}function Gr(r,e,t){return e=ra(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Xr(r,e){if(r==null)return{};var t={},a=Object.keys(r),n,s;for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&(t[n]=r[n]);return t}function Kr(r,e){if(r==null)return{};var t=Xr(r,e),a,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)a=s[n],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(r,a)&&(t[a]=r[a])}return t}function Et(r,e){return Zr(r)||Yr(r,e)||qt(r,e)||ea()}function je(r){return Vr(r)||Qr(r)||qt(r)||$r()}function Vr(r){if(Array.isArray(r))return tt(r)}function Zr(r){if(Array.isArray(r))return r}function Qr(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function qt(r,e){if(r){if(typeof r=="string")return tt(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tt(r,e)}}function tt(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=r[t];return a}function $r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ea(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ta(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var a=t.call(r,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ra(r){var e=ta(r,"string");return typeof e=="symbol"?e:String(e)}function Se(r){var e=r.sizes.shift(),t=Math.max(Math.ceil(e[0]),1),a=Math.max(Math.ceil(e[1]),1),n=[t-1,a-1,1,1],s=Date.now(),i=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,o,l;i?(o=new OffscreenCanvas(1,1),l=new OffscreenCanvas(t,a)):(o=document.createElement("canvas"),o.width=1,o.height=1,l=document.createElement("canvas"),l.width=t,l.height=a);var h=o.getContext("2d"),v=l.getContext("2d");v&&(v.fillRect.apply(v,n),h.drawImage(l,t-1,a-1,1,1,0,0,1,1));var m=h&&h.getImageData(0,0,1,1).data[3]!==0,c=Date.now()-s;return[o,l].forEach(function(p){p.height=0,p.width=0}),i?(postMessage({width:t,height:a,benchmark:c,isTestPass:m}),!m&&r.sizes.length&&Se(r)):m?r.onSuccess(t,a,c):(r.onError(t,a,c),r.sizes.length&&Se(r)),m}var Ve={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},aa=["onError","onSuccess"],ie={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},_e={};function Ze(r){var e=r.width===r.height,t=r.height===1,a=r.width===1,n=[];if(!r.width||!r.height)r.sizes.forEach(function(v){var m=e||t?v:1,c=e||a?v:1;n.push([m,c])});else for(var s=r.min||ie.min,i=r.step||ie.step,o=Math.max(r.width,r.height);o>=s;){var l=e||t?o:1,h=e||a?o:1;n.push([l,h]),o-=i}return n}function Re(r){var e=window&&"HTMLCanvasElement"in window,t=window&&"OffscreenCanvas"in window,a=Date.now(),n=r.onError,s=r.onSuccess,i=Kr(r,aa),o=null;if(!e)return!1;if(r.useWorker&&t){var l=`
            var canvasTest = `.concat(Se.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),h=new Blob([l],{type:"application/javascript"}),v=URL.createObjectURL(h);o=new Worker(v),URL.revokeObjectURL(v),o.onmessage=function(m){var c=m.data,p=c.width,d=c.height,g=c.benchmark,b=c.isTestPass;b?(_e[a].onSuccess(p,d,g),delete _e[a]):_e[a].onError(p,d,g)}}if(r.usePromise)return new Promise(function(m,c){var p=B(B({},r),{},{onError:function(x,O,k){var y;if(r.sizes.length===0)y=!0;else{var w=r.sizes.slice(-1),X=Et(w,1),T=Et(X[0],2),H=T[0],ne=T[1];y=x===H&&O===ne}n(x,O,k),y&&c({width:x,height:O,benchmark:k})},onSuccess:function(x,O,k){s(x,O,k),m({width:x,height:O,benchmark:k})}});if(o){var d=p.onError,g=p.onSuccess;_e[a]={onError:d,onSuccess:g},o.postMessage(i)}else Se(p)});if(o)_e[a]={onError:n,onSuccess:s},o.postMessage(i);else return Se(r)}var na={maxArea:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ze({width:e.max,height:e.max,min:e.min,step:e.step,sizes:je(Ve.area)}),a=B(B(B({},ie),e),{},{sizes:t});return Re(a)},maxHeight:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ze({width:1,height:e.max,min:e.min,step:e.step,sizes:je(Ve.height)}),a=B(B(B({},ie),e),{},{sizes:t});return Re(a)},maxWidth:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ze({width:e.max,height:1,min:e.min,step:e.step,sizes:je(Ve.width)}),a=B(B(B({},ie),e),{},{sizes:t});return Re(a)},test:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=B(B({},ie),e);return t.sizes=je(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),Re(t)}};const sa=(r,e,t,a=.1)=>{if(typeof window>"u")return t;for(;!na.test({sizes:[[r*t,e*t]]});)t-=a;return t};var ia=L("<canvas></canvas> <div><!></div>",1);function oa(r,e){pe(e,!0);let t=te(e,"style",3,""),a=te(e,"autoplay",3,!1),n=te(e,"autoclear",3,!0),s=te(e,"layerEvents",3,!1),i=jt(e,["$$slots","$$events","$$legacy","width","height","pixelRatio","class","style","autoplay","autoclear","layerEvents","onresize","contextSettings","children"]),o,l,h,v=M(2),m=M(0),c=M(0);const p=xe(()=>e.width??u(m)),d=xe(()=>e.height??u(c)),g=xe(()=>u(v)&&e.pixelRatio==="auto"?sa(u(p),u(d),u(v)):e.pixelRatio&&e.pixelRatio!=="auto"?e.pixelRatio:u(v)),b=new Ur({get width(){return u(p)},get height(){return u(d)},get pixelRatio(){return u(g)},get autoplay(){return a()},get autoclear(){return n()},get layerEvents(){return s()},get onresize(){return e.onresize},handlers:i});nt(()=>{s()?l=Nr(o,e.contextSettings):l=o.getContext("2d",e.contextSettings),b.init(l,h)});const x=()=>b.redraw();var O=ia(),k=Te(O);let y;mt(k,T=>o=T,()=>o);var w=F(k,2);Qe(w,"",{},{display:"none"});var X=A(w);return Tr(X,()=>e.children??Sr),C(w),mt(w,T=>h=T,()=>h),ke(T=>y=Or(k,y,{class:e.class,width:u(p)*u(g),height:u(d)*u(g),style:t(),...T,[Cr]:{width:e.width?`${e.width}px`:"100%",height:e.height?`${e.height}px`:"100%"}}),[()=>b.createEventHandlers()]),zr("devicePixelRatio","resize",kr,T=>_(v,T,!0)),wt(k,"clientWidth",T=>_(m,T)),wt(k,"clientHeight",T=>_(c,T)),z(r,O),ge({redraw:x,get canvas(){return o},set canvas(T){o=T},get context(){return l},set context(T){l=T}})}var la=L("<div></div>");function Ut(r,e){pe(e,!0);const t=jt(e,["$$slots","$$events","$$legacy"]),a=qr(t);var n=la();At(n,"data-layer-id",a),z(r,n),ge()}function ca(r,e){pe(e,!0);const t=({context:i,width:o,height:l})=>{const h=document.getElementById("canvas-container"),v=e.scenary.map(d=>d.map(g=>g===1)),m={width:o-h.clientWidth,height:l-h.clientHeight},c=m.width/e.scenary.length,p=m.height/e.scenary[0].length;for(let d=0;d<e.scenary[0].length;d++)for(let g=0;g<e.scenary.length;g++)i.fillStyle=v[d][g]?"black":"white",i.fillRect(d*c+h.clientWidth/2-c/2,g*p+h.clientHeight/2-p/2,2*c,2*p)};var a=St(),n=Te(a);{var s=i=>{Ut(i,{render:t})};$(n,i=>{e.scenary&&i(s)})}z(r,a),ge()}function ua(r,e){Ut(r,{render:({context:a,width:n,height:s})=>{const i=document.getElementById("canvas-container"),[o,l]=e.position;a.fillStyle="tomato",a.beginPath(),a.arc(o*(n-i.clientWidth)+i.clientWidth/2,l*(s-i.clientHeight)+i.clientHeight/2,20,0,2*Math.PI),a.fill(),i.scrollTo({top:l*(s-i.clientHeight),left:o*(n-i.clientWidth)})}})}var da=L("<!> <!>",1),fa=L('<div id="canvas-container" class="h-full w-full items-start justify-start flex overflow-scroll"><!></div>');function va(r,e){pe(e,!0);let t=Pt({width:500,height:500}),a=M(null),n=M(null),s=M(void 0);nt(async()=>{const l=document.getElementById("canvas-container"),v=await(await fetch("/api/mapping")).json();_(a,v,!0),_(n,v,!0),_(s,new EventSource("/api/mupdates"),!0),u(s).addEventListener("scene_update",c=>{_(a,JSON.parse(c.data),!0)}),u(s).addEventListener("position_update",c=>{_(n,JSON.parse(c.data),!0)});const m=()=>{t.width=500+l.clientWidth,t.height=500+l.clientHeight};return window.addEventListener("resize",m),m(),()=>{window.removeEventListener("resize",m),scenarySource&&scenarySource.close(),toskrPosSource&&toskrPosSource.close()}});var i=fa(),o=A(i);oa(o,{get width(){return t.width},get height(){return t.height},style:"border: 1px solid black; background-color: black;",layerEvents:!0,children:(l,h)=>{var v=da(),m=Te(v);{var c=g=>{ca(g,{get scenary(){return u(a).map}})};$(m,g=>{u(a)&&g(c)})}var p=F(m,2);{var d=g=>{const b=xe(()=>[u(n).toskr[0]/u(a).map.length,u(n).toskr[1]/u(a).map[0].length]);ua(g,{get position(){return u(b)}})};$(p,g=>{u(n)&&g(d)})}z(l,v)},$$slots:{default:!0}}),C(i),z(r,i),ge()}var ha=L('<form class="flex flex-col w-full h-full justify-center items-center p-4 gap-2"><input type="number" name="id" placeholder="Task ID" class="theme-dark-input"> <input type="text" name="name" placeholder="Task Name" class="theme-dark-input"> <input type="text" name="start" placeholder="Start" class="theme-dark-input"> <input type="text" name="end" placeholder="Goal" class="theme-dark-input"> <input type="number" name="priority" placeholder="Priority" class="theme-dark-input"> <button type="submit" class="theme-dark-window-button p-2">Add Task</button></form>'),pa=L('<div class="absolute top-0 left-0 w-full h-full flex justify-center items-center bg-[#242424b4] z-50"><div class="absolute flex justify-center items-center theme-dark-container rounded-md justify-self-center"><!></div></div>'),ga=L("<p>Loading...</p>"),ma=L('<div class="flex" style="font-size: 4em;"><!></div>'),ya=L("<p>Loading...</p>"),wa=L('<div class="flex" style="font-size: 4em;"><!></div>'),ba=(r,e)=>{fetch(`/api/delete_task?id=${u(e).id}`).then(t=>t.json()).then(t=>{console.log("Task deleted:",t)})},_a=L('<li class="flex flex-row w-full justify-between items-center p-2 pl-4 border-b-1 border-[#242424]"><div class="flex flex-row w-full justify-start items-center"> <div class="flex flex-col w-full ml-5"><p> </p> <p class="text-[#747474]"> </p></div></div> <button aria-label="Delete Task" class="theme-dark-window-button"><div class="p-2 flex flex-col justify-center items-center"><span class="cuida--trash-outline"></span></div></button></li>'),xa=L('<ul class="flex flex-col w-full"></ul>'),Ea=L("<p>Loading...</p>"),Sa=L('<div class="flex h-full w-full overflow-y-scroll"><!></div>'),ka=L('<img alt="">'),Ta=L('<!> <div class="flex flex-col md:w-2/3 md:h-full w-full h-1/3"><div class="flex flex-row md:h-1/2 h-full w-full mb-1"><div class="flex w-1/2 mr-1 justify-center items-center theme-dark-container rounded-md"><!></div> <div class="flex w-1/2 ml-1 justify-center items-center theme-dark-container rounded-md"><!></div></div> <div class="md:flex md:static flex-row h-1/2 w-full mt-1 hidden absolute theme-dark-container rounded-md"><!></div></div> <div class="flex flex-col md:w-1/3 md:h-full w-full h-full overflow-hidden"><div class="flex aspect-3/4 w-full mb-1 items-center justify-center theme-dark-container rounded-md"><!></div> <div class="relative flex w-full h-full mt-1 items-center justify-center theme-dark-container rounded-md"><!></div></div>',1);function za(r,e){pe(e,!0);let t=M(null),a=M(null),n=M(null),s=M(void 0),i=M(void 0),o=M(void 0),l=M(!1);nt(async()=>{const j=await fetch("/api/motors");_(t,await j.json(),!0);const R=await fetch("/api/frame");_(a,await R.json(),!0);const E=await fetch("/api/tasks");return _(n,await E.json(),!0),_(s,new EventSource("/api/telemetry"),!0),u(s).addEventListener("sensor_update",I=>{_(t,JSON.parse(I.data),!0)}),_(i,new EventSource("/api/videofeed"),!0),u(i).addEventListener("video_feed",I=>{_(a,JSON.parse(I.data),!0)}),_(o,new EventSource("/api/taskupdates"),!0),u(o).addEventListener("task_update",I=>{_(n,JSON.parse(I.data),!0)}),()=>{u(s)&&u(s).close(),u(i)&&u(i).close(),u(o)&&u(o).close()}});function h(j){j.preventDefault();const R=new FormData(j.target),E={id:R.get("id"),name:R.get("name"),start:R.get("start"),end:R.get("end"),priority:R.get("priority")};fetch(`/api/add_task?id=${E.id}&priority=${E.priority}&name=${E.name}&start=${E.start}&end=${E.end}`).then(I=>I.json()).then(I=>{console.log("Task created:",I),_(l,!1)}).catch(I=>{console.error("Error creating task:",I)})}var v=Ta(),m=Te(v);{var c=j=>{var R=pa(),E=A(R),I=A(E);se(I,{title:"Add Task",onclick:()=>{_(l,!u(l))},icon:"cuida--x-outline",children:(J,W)=>{var S=ha();er("submit",S,h),z(J,S)}}),C(E),C(R),z(j,R)};$(m,j=>{u(l)&&j(c)})}var p=F(m,2),d=A(p),g=A(d),b=A(g);se(b,{title:"Speed",children:(j,R)=>{var E=ma(),I=A(E);{var J=S=>{bt(S,{get value(){return u(t).speed},get arrows(){return u(t).speed}})},W=S=>{var q=ga();z(S,q)};$(I,S=>{u(t)?S(J):S(W,!1)})}C(E),z(j,E)}}),C(g);var x=F(g,2),O=A(x);se(O,{title:"Battery",children:(j,R)=>{var E=wa(),I=A(E);{var J=S=>{bt(S,{get value(){return u(t).battery},get arrows(){return u(t).battery}})},W=S=>{var q=ya();z(S,q)};$(I,S=>{u(t)?S(J):S(W,!1)})}C(E),z(j,E)}}),C(x),C(d);var k=F(d,2),y=A(k);se(y,{title:"Tasks",onclick:()=>{_(l,!0)},icon:"cuida--plus-outline",children:(j,R)=>{var E=Sa(),I=A(E);{var J=S=>{var q=xa();zt(q,21,()=>u(n).tasks,Rt,(Ae,me)=>{var Be=_a(),Fe=A(Be),it=A(Fe),ot=F(it),Je=A(ot),Yt=A(Je,!0);C(Je);var lt=F(Je,2),Gt=A(lt);C(lt),C(ot),C(Fe);var Xt=F(Fe,2);Xt.__click=[ba,me],C(Be),ke(()=>{ze(it,`${u(me).id??""} `),ze(Yt,u(me).name),ze(Gt,`${u(me).start??""} - ${u(me).end??""}`)}),z(Ae,Be)}),C(q),z(S,q)},W=S=>{var q=Ea();z(S,q)};$(I,S=>{u(n)?S(J):S(W,!1)})}C(E),z(j,E)}}),C(k),C(p);var w=F(p,2),X=A(w),T=A(X);se(T,{title:"Camera",children:(j,R)=>{var E=St(),I=Te(E);{var J=W=>{var S=ka();ke(()=>At(S,"src",`data:image/jpg;base64,${u(a).frame??""}`)),z(W,S)};$(I,W=>{u(a)&&W(J)})}z(j,E)}}),C(X);var H=F(X,2),ne=A(H);se(ne,{title:"Map",children:(j,R)=>{va(j,{})}}),C(H),C(w),z(r,v),ge()}$t(["click"]);export{za as component};
