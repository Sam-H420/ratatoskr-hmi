var Vt=Object.defineProperty;var Zt=Object.getPrototypeOf;var Qt=Reflect.get;var ct=r=>{throw TypeError(r)};var $t=(r,e,t)=>e in r?Vt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ut=(r,e,t)=>$t(r,typeof e!="symbol"?e+"":e,t),Je=(r,e,t)=>e.has(r)||ct("Cannot "+t);var v=(r,e,t)=>(Je(r,e,"read from private field"),t?t.call(r):e.get(r)),A=(r,e,t)=>e.has(r)?ct("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),V=(r,e,t,a)=>(Je(r,e,"write to private field"),a?a.call(r,t):e.set(r,t),t),W=(r,e,t)=>(Je(r,e,"access private method"),t);var dt=(r,e,t,a)=>({set _(n){V(r,e,n,t)},get _(){return v(r,e,a)}}),ft=(r,e,t)=>Qt(Zt(r),t,e);import{t as L,s as ze,a as z,c as St,d as er,e as tr}from"../chunks/_GjLXgwK.js";import{s as qe,h as ae,a9 as rr,ab as ar,a as nr,b as sr,m as c,J as ir,c as or,r as vt,d as Ye,g as we,ah as lr,e as kt,f as Tt,p as cr,at as Ot,al as Ct,a7 as ur,O as Le,au as Z,av as Ge,F as dr,a6 as ht,aw as rt,ax as fr,ay as at,az as pt,aA as vr,ak as hr,aB as pr,ao as gr,aC as mr,af as yr,C as wr,l as It,a8 as br,N as x,v as pe,aD as Xe,aE as _r,z as j,B,A as P,x as Te,y as ge,o as be,aF as xr,Z as M,M as Pt,a2 as Ee,aG as Er,j as Ke,aH as gt,aI as Sr,Y as nt,w as Oe,an as kr,aJ as Tr}from"../chunks/Cv2XWkrT.js";import{i as $}from"../chunks/CeFvMfNe.js";import{d as Qe,b as Or,e as Cr,S as Ir,a as At,W as se}from"../chunks/1y3tKbTT.js";import{i as Pr}from"../chunks/BAhRAQyU.js";import{p as te,r as jt,b as mt}from"../chunks/C1hKYBjo.js";function Rt(r,e){return e}function Ar(r,e,t,a){for(var n=[],s=e.length,i=0;i<s;i++)vr(e[i].e,n,!0);var o=s>0&&n.length===0&&t!==null;if(o){var u=t.parentNode;hr(u),u.append(t),a.clear(),Q(r,e[0].prev,e[s-1].next)}pr(n,()=>{for(var f=0;f<s;f++){var p=e[f];o||(a.delete(p.k),Q(r,p.prev,p.next)),gr(p.e,!o)}})}function zt(r,e,t,a,n,s=null){var i=r,o={flags:e,items:new Map,first:null},u=(e&Ot)!==0;if(u){var f=r;i=ae?qe(rr(f)):f.appendChild(ar())}ae&&nr();var p=null,g=!1,l=ir(()=>{var h=t();return ur(h)?h:h==null?[]:Ct(h)});sr(()=>{var h=c(l),d=h.length;if(g&&d===0)return;g=d===0;let m=!1;if(ae){var y=i.data===or;y!==(d===0)&&(i=vt(),qe(i),Ye(!1),m=!0)}if(ae){for(var _=null,O,S=0;S<d;S++){if(we.nodeType===8&&we.data===lr){i=we,m=!0,Ye(!1);break}var w=h[S],b=a(w,S);O=Lt(we,o,_,null,w,b,S,n,e,t),o.items.set(b,O),_=O}d>0&&qe(vt())}ae||jr(h,o,i,n,e,a,t),s!==null&&(d===0?p?kt(p):p=Tt(()=>s(i)):p!==null&&cr(p,()=>{p=null})),m&&Ye(!0),c(l)}),ae&&(i=we)}function jr(r,e,t,a,n,s,i){var I,U,H,E;var o=(n&fr)!==0,u=(n&(at|rt))!==0,f=r.length,p=e.items,g=e.first,l=g,h,d=null,m,y=[],_=[],O,S,w,b;if(o)for(b=0;b<f;b+=1)O=r[b],S=s(O,b),w=p.get(S),w!==void 0&&((I=w.a)==null||I.measure(),(m??(m=new Set)).add(w));for(b=0;b<f;b+=1){if(O=r[b],S=s(O,b),w=p.get(S),w===void 0){var K=l?l.e.nodes_start:t;d=Lt(K,e,d,d===null?e.first:d.next,O,S,b,a,n,i),p.set(S,d),y=[],_=[],l=d.next;continue}if(u&&Rr(w,O,b,n),(w.e.f&Ge)!==0&&(kt(w.e),o&&((U=w.a)==null||U.unfix(),(m??(m=new Set)).delete(w))),w!==l){if(h!==void 0&&h.has(w)){if(y.length<_.length){var k=_[0],F;d=k.prev;var re=y[0],me=y[y.length-1];for(F=0;F<y.length;F+=1)yt(y[F],k,t);for(F=0;F<_.length;F+=1)h.delete(_[F]);Q(e,re.prev,me.next),Q(e,d,re),Q(e,me,k),l=k,d=me,b-=1,y=[],_=[]}else h.delete(w),yt(w,l,t),Q(e,w.prev,w.next),Q(e,w,d===null?e.first:d.next),Q(e,d,w),d=w;continue}for(y=[],_=[];l!==null&&l.k!==S;)(l.e.f&Ge)===0&&(h??(h=new Set)).add(l),_.push(l),l=l.next;if(l===null)continue;w=l}y.push(w),d=w,l=w.next}if(l!==null||h!==void 0){for(var C=h===void 0?[]:Ct(h);l!==null;)(l.e.f&Ge)===0&&C.push(l),l=l.next;var R=C.length;if(R>0){var T=(n&Ot)!==0&&f===0?t:null;if(o){for(b=0;b<R;b+=1)(H=C[b].a)==null||H.measure();for(b=0;b<R;b+=1)(E=C[b].a)==null||E.fix()}Ar(e,C,T,p)}}o&&dr(()=>{var J;if(m!==void 0)for(w of m)(J=w.a)==null||J.apply()}),ht.first=e.first&&e.first.e,ht.last=d&&d.e}function Rr(r,e,t,a){(a&at)!==0&&pt(r.v,e),(a&rt)!==0?pt(r.i,t):r.i=t}function Lt(r,e,t,a,n,s,i,o,u,f){var p=(u&at)!==0,g=(u&mr)===0,l=p?g?Le(n):Z(n):n,h=(u&rt)===0?i:Z(i),d={i:h,v:l,k:s,a:null,e:null,prev:t,next:a};try{return d.e=Tt(()=>o(r,l,h,f),ae),d.e.prev=t&&t.e,d.e.next=a&&a.e,t===null?e.first=d:(t.next=d,t.e.next=d.e),a!==null&&(a.prev=d,a.e.prev=d.e),d}finally{}}function yt(r,e,t){for(var a=r.next?r.next.e.nodes_start:t,n=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==a;){var i=yr(s);n.before(s),s=i}}function Q(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}var ee,oe,Ce,Me,Dt;const He=class He{constructor(e){A(this,Me);A(this,ee,new WeakMap);A(this,oe);A(this,Ce);V(this,Ce,e)}observe(e,t){var a=v(this,ee).get(e)||new Set;return a.add(t),v(this,ee).set(e,a),W(this,Me,Dt).call(this).observe(e,v(this,Ce)),()=>{var n=v(this,ee).get(e);n.delete(t),n.size===0&&(v(this,ee).delete(e),v(this,oe).unobserve(e))}}};ee=new WeakMap,oe=new WeakMap,Ce=new WeakMap,Me=new WeakSet,Dt=function(){return v(this,oe)??V(this,oe,new ResizeObserver(e=>{for(var t of e){He.entries.set(t.target,t);for(var a of v(this,ee).get(t.target)||[])a(t)}}))},ut(He,"entries",new WeakMap);let $e=He;var zr=new $e({box:"border-box"});function wt(r,e,t){var a=zr.observe(r,()=>t(r[e]));wr(()=>(It(()=>t(r[e])),a))}function Lr(r,e,t,a,n){var s=()=>{a(t[r])};t.addEventListener(e,s),s(),(t===document.body||t===window||t===document)&&br(()=>{t.removeEventListener(e,s)})}function _e(r){x(r,r.v+1)}var Dr=L('<div class="gauge-abs svelte-1fa4a5t"><div class="gauge-max svelte-1fa4a5t"></div></div>'),Mr=L('<div class="gauge svelte-1fa4a5t"><!> <div class="gauge-overflow svelte-1fa4a5t"><div class="gauge-fill gauge-bg svelte-1fa4a5t"></div> <div class="gauge-fill svelte-1fa4a5t"></div> <div class="gauge-white svelte-1fa4a5t"></div> <div class="gauge-value svelte-1fa4a5t"> </div></div></div>');function bt(r,e){pe(e,!1);let t=te(e,"value",8,0),a=te(e,"arrows",8,""),n=te(e,"thresholds",8,"70,90"),s=te(e,"colors",8,"#525C71,#e8523b"),i=Le(),o=Le(),u=Le();Xe(()=>(be(n()),be(t()),be(s())),()=>{const m=String(n()).split(","),y=m.indexOf(m.find(O=>t()<parseInt(O,10))),_=String(s()).split(",");x(i,_[y]||_[_.length-1])}),Xe(()=>be(t()),()=>{x(o,(100-t())*1.8)}),Xe(()=>be(a()),()=>{x(u,a()?String(a()).split(",").map(m=>parseInt(m)*1.8).filter(m=>m>-1):[])}),_r(),Pr();var f=Mr(),p=j(f);zt(p,1,()=>c(u),Rt,(m,y)=>{var _=Dr();Te(()=>Qe(_,`transform:rotate(${c(y)??""}deg)`)),z(m,_)});var g=B(p,2),l=B(j(g),2),h=B(l,4),d=j(h,!0);P(h),P(g),P(f),Te(()=>{Qe(l,`transform:rotate(-${c(o)??""}deg);box-shadow: inset 0 0 0 1em ${c(i)??""};`),ze(d,t())}),z(r,f),ge()}const Hr=r=>{const e=r*2,t=e>>16&255,a=e>>8&255,n=e&255;return[t,a,n]},Wr=([r,e,t])=>{const a=(r<<16|e<<8|t)/2;return a%1?0:a},Nr=["filter","shadowBlur","globalCompositeOperation","globalAlpha","fillStyle","strokeStyle"],Br=(r,e,{rgbToId:t=Wr,idToRgb:a=Hr}={})=>{const n=r.getContext("2d",e),s=new OffscreenCanvas(r.width,r.height),i=s.getContext("2d",{willReadFrequently:!1,alpha:!1});return new Proxy(n,{get(o,u){const{width:f,height:p}=r;if((f!==s.width||p!==s.height)&&(s.width=f,s.height=p),u==="getLayerIdAt")return(l,h)=>{const[d,m,y]=i.getImageData(l,h,1,1).data;return t([d,m,y])};if(u==="setCurrentLayerId")return l=>{const[h,d,m]=a(l),y=`rgb(${h},${d},${m})`;i.fillStyle=y,i.strokeStyle=y};const g=o[u];return typeof g!="function"?g:(...l)=>{let h=u,d=l;return u==="drawImage"&&(h="fillRect",d=l.slice(-4)),i[h](...d),Reflect.apply(g,o,l)}},set(o,u,f){return o[u]=f,Nr.includes(u)||(i[u]=f),!0}})};var Y,G,X,le,De;const st=class st extends Map{constructor(t){super();A(this,le);A(this,Y,new Map);A(this,G,Z(0));A(this,X,Z(0));if(t){for(var[a,n]of t)super.set(a,n);v(this,X).v=super.size}}has(t){var a=v(this,Y),n=a.get(t);if(n===void 0){var s=super.get(t);if(s!==void 0)n=Z(0),a.set(t,n);else return c(v(this,G)),!1}return c(n),!0}forEach(t,a){W(this,le,De).call(this),super.forEach(t,a)}get(t){var a=v(this,Y),n=a.get(t);if(n===void 0){var s=super.get(t);if(s!==void 0)n=Z(0),a.set(t,n);else{c(v(this,G));return}}return c(n),super.get(t)}set(t,a){var g;var n=v(this,Y),s=n.get(t),i=super.get(t),o=super.set(t,a),u=v(this,G);if(s===void 0)n.set(t,Z(0)),x(v(this,X),super.size),_e(u);else if(i!==a){_e(s);var f=u.reactions===null?null:new Set(u.reactions),p=f===null||!((g=s.reactions)!=null&&g.every(l=>f.has(l)));p&&_e(u)}return o}delete(t){var a=v(this,Y),n=a.get(t),s=super.delete(t);return n!==void 0&&(a.delete(t),x(v(this,X),super.size),x(n,-1),_e(v(this,G))),s}clear(){if(super.size!==0){super.clear();var t=v(this,Y);x(v(this,X),0);for(var a of t.values())x(a,-1);_e(v(this,G)),t.clear()}}keys(){return c(v(this,G)),super.keys()}values(){return W(this,le,De).call(this),super.values()}entries(){return W(this,le,De).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return c(v(this,X)),super.size}};Y=new WeakMap,G=new WeakMap,X=new WeakMap,le=new WeakSet,De=function(){c(v(this,G));var t=v(this,Y);if(v(this,X).v!==t.size)for(var a of ft(st.prototype,this,"keys").call(this))t.has(a)||t.set(a,Z(0));for(var[,n]of v(this,Y))c(n)};let Se=st;const Fr=r=>{if(window.TouchEvent&&r instanceof TouchEvent){const{left:a,top:n}=r.target.getBoundingClientRect(),{clientX:s,clientY:i}=r.changedTouches[0];return{x:s-a,y:i-n}}const{offsetX:e,offsetY:t}=r;return{x:e,y:t}},_t=(r,e)=>{var t,a;r instanceof MouseEvent&&((t=r.target)==null||t.dispatchEvent(new PointerEvent(`layer.pointer${e}`,r)),(a=r.target)==null||a.dispatchEvent(new MouseEvent(`layer.mouse${e}`,r)))},Ur=["onclick","oncontextmenu","ondblclick","onauxclick","onmousedown","onmouseenter","onmouseleave","onmouseup","onmousemove","onwheel","ontouchstart","ontouchcancel","ontouchend","ontouchmove","onpointerenter","onpointerleave","onpointerdown","onpointerup","onpointermove","onpointercancel","onlayer.mouseenter","onlayer.mouseleave","onlayer.pointerenter","onlayer.pointerleave","onfocus","onblur","onfullscreenchange","onfullscreenerror","onscroll","oncut","oncopy","onpaste","onkeydown","onkeypress","onkeyup","onmouseover","onmouseout","onselect","ondrag","ondragend","ondragenter","ondragstart","ondragleave","ondragover","ondrop","onpointerover","onpointerout","ongotpointercapture","onlostpointercapture"],Jr=r=>console.warn("[svelte-canvas] %s",r),Mt=Symbol("register"),qr=r=>xr(Mt)(r);var ce,ue,de,We,Ne,Ie,ne,q,fe,ve,Pe,he,Ae,D,Ht,Wt,Nt,Bt,et,Ft,Ut;class Yr{constructor(e){A(this,D);A(this,ce,new Se);A(this,ue,new Se);A(this,de,new Se);A(this,We,1);A(this,Ne,Date.now());A(this,Ie,M(0));A(this,ne);A(this,q);A(this,fe);A(this,ve);A(this,Pe,M(Pt([])));A(this,he,M(0));A(this,Ae,Ee(()=>v(this,de).get(c(v(this,he)))));V(this,q,e),Er(Mt,this.register.bind(this))}init(e,t){V(this,ne,e),W(this,D,Bt).call(this,t),Ke(()=>W(this,D,et).call(this)),Ke(()=>W(this,D,Nt).call(this)),Ke(()=>(c(v(this,Ie)),W(this,D,Ft).call(this))),gt(()=>W(this,D,Ut).call(this))}redraw(){Sr(v(this,Ie))}register({setup:e,render:t,...a}){const n=W(this,D,Ht).call(this);return e&&v(this,ce).set(n,e),v(this,ue).set(n,t),Object.keys(a).length&&(v(this,q).layerEvents?v(this,de).set(n,a):Jr("Canvas must have layerEvents={true} in order to use layer-level event handlers")),gt(()=>W(this,D,Wt).call(this,n)),n}createEventHandlers(){const e=n=>{const s=`on${n.type}`,i=v(this,q).handlers[s];i==null||i(n)},t=n=>{const{pixelRatio:s}=v(this,q),{x:i,y:o}=Fr(n);if(["touchstart","pointermove"].includes(n.type)){const p=v(this,ne).getLayerIdAt(i*s,o*s);c(v(this,he))!==p&&(_t(n,"leave"),x(v(this,he),p,!0),_t(n,"enter"))}if(!c(v(this,Ae)))return;const u=`on${n.type.replace("layer.","")}`,f=c(v(this,Ae))[u];f==null||f({x:i,y:o,originalEvent:n})},a=n=>{e(n),v(this,q).layerEvents&&t(n)};return Ur.reduce((n,s)=>({...n,[s]:a}),{})}}ce=new WeakMap,ue=new WeakMap,de=new WeakMap,We=new WeakMap,Ne=new WeakMap,Ie=new WeakMap,ne=new WeakMap,q=new WeakMap,fe=new WeakMap,ve=new WeakMap,Pe=new WeakMap,he=new WeakMap,Ae=new WeakMap,D=new WeakSet,Ht=function(){return dt(this,We)._++},Wt=function(e){v(this,ue).delete(e),v(this,de).delete(e)},Nt=function(){const{onresize:e,width:t,height:a,pixelRatio:n}=v(this,q);e==null||e({width:t,height:a,pixelRatio:n})},Bt=function(e){const t=()=>{const a=[...e.children];x(v(this,Pe),a.map(n=>+n.dataset.layerId),!0)};V(this,ve,new MutationObserver(()=>t())),v(this,ve).observe(e,{childList:!0}),t()},et=function(){v(this,q).autoplay?(It(()=>this.redraw()),V(this,fe,requestAnimationFrame(()=>W(this,D,et).call(this)))):cancelAnimationFrame(v(this,fe))},Ft=function(){var u,f,p;const e=v(this,ne),{width:t,height:a,pixelRatio:n,autoclear:s}=v(this,q),i=Date.now()-v(this,Ne),o={context:e,width:t,height:a,time:i};e.setTransform(n,0,0,n,0,0),s&&e.clearRect(0,0,t,a);for(const[g,l]of v(this,ce))l(o),v(this,ce).delete(g);for(const g of c(v(this,Pe)))(f=(u=v(this,ne)).setCurrentLayerId)==null||f.call(u,g),(p=v(this,ue).get(g))==null||p(o)},Ut=function(){var e;typeof window>"u"||((e=v(this,ve))==null||e.disconnect(),cancelAnimationFrame(v(this,fe)))};/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function Gr(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var a,n,s,i,o=[],u=!0,f=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(a=s.call(t)).done)&&(o.push(a.value),o.length!==e);u=!0);}catch(p){f=!0,n=p}finally{try{if(!u&&t.return!=null&&(i=t.return(),Object(i)!==i))return}finally{if(f)throw n}}return o}}function xt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,a)}return t}function N(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xt(Object(t),!0).forEach(function(a){Xr(r,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xt(Object(t)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(t,a))})}return r}function Xr(r,e,t){return e=aa(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Kr(r,e){if(r==null)return{};var t={},a=Object.keys(r),n,s;for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&(t[n]=r[n]);return t}function Vr(r,e){if(r==null)return{};var t=Kr(r,e),a,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)a=s[n],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(r,a)&&(t[a]=r[a])}return t}function Et(r,e){return Qr(r)||Gr(r,e)||Jt(r,e)||ta()}function je(r){return Zr(r)||$r(r)||Jt(r)||ea()}function Zr(r){if(Array.isArray(r))return tt(r)}function Qr(r){if(Array.isArray(r))return r}function $r(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Jt(r,e){if(r){if(typeof r=="string")return tt(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tt(r,e)}}function tt(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=r[t];return a}function ea(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ta(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ra(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var a=t.call(r,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function aa(r){var e=ra(r,"string");return typeof e=="symbol"?e:String(e)}function ke(r){var e=r.sizes.shift(),t=Math.max(Math.ceil(e[0]),1),a=Math.max(Math.ceil(e[1]),1),n=[t-1,a-1,1,1],s=Date.now(),i=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,o,u;i?(o=new OffscreenCanvas(1,1),u=new OffscreenCanvas(t,a)):(o=document.createElement("canvas"),o.width=1,o.height=1,u=document.createElement("canvas"),u.width=t,u.height=a);var f=o.getContext("2d"),p=u.getContext("2d");p&&(p.fillRect.apply(p,n),f.drawImage(u,t-1,a-1,1,1,0,0,1,1));var g=f&&f.getImageData(0,0,1,1).data[3]!==0,l=Date.now()-s;return[o,u].forEach(function(h){h.height=0,h.width=0}),i?(postMessage({width:t,height:a,benchmark:l,isTestPass:g}),!g&&r.sizes.length&&ke(r)):g?r.onSuccess(t,a,l):(r.onError(t,a,l),r.sizes.length&&ke(r)),g}var Ve={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},na=["onError","onSuccess"],ie={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},xe={};function Ze(r){var e=r.width===r.height,t=r.height===1,a=r.width===1,n=[];if(!r.width||!r.height)r.sizes.forEach(function(p){var g=e||t?p:1,l=e||a?p:1;n.push([g,l])});else for(var s=r.min||ie.min,i=r.step||ie.step,o=Math.max(r.width,r.height);o>=s;){var u=e||t?o:1,f=e||a?o:1;n.push([u,f]),o-=i}return n}function Re(r){var e=window&&"HTMLCanvasElement"in window,t=window&&"OffscreenCanvas"in window,a=Date.now(),n=r.onError,s=r.onSuccess,i=Vr(r,na),o=null;if(!e)return!1;if(r.useWorker&&t){var u=`
            var canvasTest = `.concat(ke.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),f=new Blob([u],{type:"application/javascript"}),p=URL.createObjectURL(f);o=new Worker(p),URL.revokeObjectURL(p),o.onmessage=function(g){var l=g.data,h=l.width,d=l.height,m=l.benchmark,y=l.isTestPass;y?(xe[a].onSuccess(h,d,m),delete xe[a]):xe[a].onError(h,d,m)}}if(r.usePromise)return new Promise(function(g,l){var h=N(N({},r),{},{onError:function(_,O,S){var w;if(r.sizes.length===0)w=!0;else{var b=r.sizes.slice(-1),K=Et(b,1),k=Et(K[0],2),F=k[0],re=k[1];w=_===F&&O===re}n(_,O,S),w&&l({width:_,height:O,benchmark:S})},onSuccess:function(_,O,S){s(_,O,S),g({width:_,height:O,benchmark:S})}});if(o){var d=h.onError,m=h.onSuccess;xe[a]={onError:d,onSuccess:m},o.postMessage(i)}else ke(h)});if(o)xe[a]={onError:n,onSuccess:s},o.postMessage(i);else return ke(r)}var sa={maxArea:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ze({width:e.max,height:e.max,min:e.min,step:e.step,sizes:je(Ve.area)}),a=N(N(N({},ie),e),{},{sizes:t});return Re(a)},maxHeight:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ze({width:1,height:e.max,min:e.min,step:e.step,sizes:je(Ve.height)}),a=N(N(N({},ie),e),{},{sizes:t});return Re(a)},maxWidth:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ze({width:e.max,height:1,min:e.min,step:e.step,sizes:je(Ve.width)}),a=N(N(N({},ie),e),{},{sizes:t});return Re(a)},test:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=N(N({},ie),e);return t.sizes=je(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),Re(t)}};const ia=(r,e,t,a=.1)=>{if(typeof window>"u")return t;for(;!sa.test({sizes:[[r*t,e*t]]});)t-=a;return t};var oa=L("<canvas></canvas> <div><!></div>",1);function la(r,e){pe(e,!0);let t=te(e,"style",3,""),a=te(e,"autoplay",3,!1),n=te(e,"autoclear",3,!0),s=te(e,"layerEvents",3,!1),i=jt(e,["$$slots","$$events","$$legacy","width","height","pixelRatio","class","style","autoplay","autoclear","layerEvents","onresize","contextSettings","children"]),o,u,f,p=M(2),g=M(0),l=M(0);const h=Ee(()=>e.width??c(g)),d=Ee(()=>e.height??c(l)),m=Ee(()=>c(p)&&e.pixelRatio==="auto"?ia(c(h),c(d),c(p)):e.pixelRatio&&e.pixelRatio!=="auto"?e.pixelRatio:c(p)),y=new Yr({get width(){return c(h)},get height(){return c(d)},get pixelRatio(){return c(m)},get autoplay(){return a()},get autoclear(){return n()},get layerEvents(){return s()},get onresize(){return e.onresize},handlers:i});nt(()=>{s()?u=Br(o,e.contextSettings):u=o.getContext("2d",e.contextSettings),y.init(u,f)});const _=()=>y.redraw();var O=oa(),S=Oe(O);let w;mt(S,k=>o=k,()=>o);var b=B(S,2);Qe(b,"",{},{display:"none"});var K=j(b);return Or(K,()=>e.children??kr),P(b),mt(b,k=>f=k,()=>f),Te(k=>w=Cr(S,w,{class:e.class,width:c(h)*c(m),height:c(d)*c(m),style:t(),...k,[Ir]:{width:e.width?`${e.width}px`:"100%",height:e.height?`${e.height}px`:"100%"}}),[()=>y.createEventHandlers()]),Lr("devicePixelRatio","resize",Tr,k=>x(p,k,!0)),wt(S,"clientWidth",k=>x(g,k)),wt(S,"clientHeight",k=>x(l,k)),z(r,O),ge({redraw:_,get canvas(){return o},set canvas(k){o=k},get context(){return u},set context(k){u=k}})}var ca=L("<div></div>");function qt(r,e){pe(e,!0);const t=jt(e,["$$slots","$$events","$$legacy"]),a=qr(t);var n=ca();At(n,"data-layer-id",a),z(r,n),ge()}function ua(r,e){pe(e,!0);const t=({context:i,width:o,height:u})=>{const f=document.getElementById("canvas-container"),p=e.scenary.map(d=>d.map(m=>m===1)),g={width:o-f.clientWidth,height:u-f.clientHeight},l=g.width/e.scenary.length,h=g.height/e.scenary[0].length;for(let d=0;d<e.scenary[0].length;d++)for(let m=0;m<e.scenary.length;m++)i.fillStyle=p[d][m]?"black":"white",i.fillRect(d*l+f.clientWidth/2-l/2,m*h+f.clientHeight/2-h/2,2*l,2*h)};var a=St(),n=Oe(a);{var s=i=>{qt(i,{render:t})};$(n,i=>{e.scenary&&i(s)})}z(r,a),ge()}function da(r,e){qt(r,{render:({context:a,width:n,height:s})=>{const i=document.getElementById("canvas-container"),[o,u]=e.position;a.fillStyle="tomato",a.beginPath(),a.arc(o*(n-i.clientWidth)+i.clientWidth/2,u*(s-i.clientHeight)+i.clientHeight/2,20,0,2*Math.PI),a.fill(),i.scrollTo({top:u*(s-i.clientHeight),left:o*(n-i.clientWidth)})}})}var fa=L("<!> <!>",1),va=L('<div id="canvas-container" class="h-full w-full items-start justify-start flex overflow-scroll"><!></div>');function ha(r,e){pe(e,!0);const t="http://172.26.197.108:18080";let a=Pt({width:500,height:500}),n=M(null),s=M(null),i=M(void 0);nt(async()=>{const f=document.getElementById("canvas-container"),g=await(await fetch(`${t}/mapping`)).json();x(n,g,!0),x(s,g,!0),x(i,new EventSource(`${t}/mupdates`),!0),c(i).addEventListener("scene_update",h=>{x(n,JSON.parse(h.data),!0)}),c(i).addEventListener("position_update",h=>{x(s,JSON.parse(h.data),!0)});const l=()=>{a.width=500+f.clientWidth,a.height=500+f.clientHeight};return window.addEventListener("resize",l),l(),()=>{window.removeEventListener("resize",l),scenarySource&&scenarySource.close(),toskrPosSource&&toskrPosSource.close()}});var o=va(),u=j(o);la(u,{get width(){return a.width},get height(){return a.height},style:"border: 1px solid black; background-color: black;",layerEvents:!0,children:(f,p)=>{var g=fa(),l=Oe(g);{var h=y=>{ua(y,{get scenary(){return c(n).map}})};$(l,y=>{c(n)&&y(h)})}var d=B(l,2);{var m=y=>{const _=Ee(()=>[c(s).toskr[0]/c(n).map.length,c(s).toskr[1]/c(n).map[0].length]);da(y,{get position(){return c(_)}})};$(d,y=>{c(s)&&y(m)})}z(f,g)},$$slots:{default:!0}}),P(o),z(r,o),ge()}var pa=L('<form class="flex flex-col w-full h-full justify-center items-center p-4 gap-2"><input type="number" name="id" placeholder="Task ID" class="theme-dark-input"> <input type="text" name="name" placeholder="Task Name" class="theme-dark-input"> <input type="text" name="start" placeholder="Start" class="theme-dark-input"> <input type="text" name="end" placeholder="Goal" class="theme-dark-input"> <input type="number" name="priority" placeholder="Priority" class="theme-dark-input"> <button type="submit" class="theme-dark-window-button p-2">Add Task</button></form>'),ga=L('<div class="absolute top-0 left-0 w-full h-full flex justify-center items-center bg-[#242424b4] z-50"><div class="absolute flex justify-center items-center theme-dark-container rounded-md justify-self-center"><!></div></div>'),ma=L("<p>Loading...</p>"),ya=L('<div class="flex" style="font-size: 4em;"><!></div>'),wa=L("<p>Loading...</p>"),ba=L('<div class="flex" style="font-size: 4em;"><!></div>'),_a=(r,e,t)=>{fetch(`${e}/delete_task?id=${c(t).id}`).then(a=>a.json()).then(a=>{console.log("Task deleted:",a)})},xa=L('<li class="flex flex-row w-full justify-between items-center p-2 pl-4 border-b-1 border-[#242424]"><div class="flex flex-row w-full justify-start items-center"> <div class="flex flex-col w-full ml-5"><p> </p> <p class="text-[#747474]"> </p></div></div> <button aria-label="Delete Task" class="theme-dark-window-button"><div class="p-2 flex flex-col justify-center items-center"><span class="cuida--trash-outline"></span></div></button></li>'),Ea=L('<ul class="flex flex-col w-full"></ul>'),Sa=L("<p>Loading...</p>"),ka=L('<div class="flex h-full w-full overflow-y-scroll"><!></div>'),Ta=L('<img alt="">'),Oa=L('<!> <div class="flex flex-col md:w-2/3 md:h-full w-full h-1/3"><div class="flex flex-row md:h-1/2 h-full w-full mb-1"><div class="flex w-1/2 mr-1 justify-center items-center theme-dark-container rounded-md"><!></div> <div class="flex w-1/2 ml-1 justify-center items-center theme-dark-container rounded-md"><!></div></div> <div class="md:flex md:static flex-row h-1/2 w-full mt-1 hidden absolute theme-dark-container rounded-md"><!></div></div> <div class="flex flex-col md:w-1/3 md:h-full w-full h-full overflow-hidden"><div class="flex aspect-3/4 w-full mb-1 items-center justify-center theme-dark-container rounded-md"><!></div> <div class="relative flex w-full h-full mt-1 items-center justify-center theme-dark-container rounded-md"><!></div></div>',1);function La(r,e){pe(e,!0);const t="http://172.26.197.108:18080";let a=M(null),n=M(null),s=M(null),i=M(void 0),o=M(void 0),u=M(void 0),f=M(!1);nt(async()=>{const C=await fetch(`${t}/motors`);x(a,await C.json(),!0);const R=await fetch(`${t}/frame`);x(n,await R.json(),!0);const T=await fetch(`${t}/tasks`);return x(s,await T.json(),!0),x(i,new EventSource(`${t}/telemetry`),!0),c(i).addEventListener("sensor_update",I=>{x(a,JSON.parse(I.data),!0)}),x(o,new EventSource(`${t}/videofeed`),!0),c(o).addEventListener("video_feed",I=>{x(n,JSON.parse(I.data),!0)}),x(u,new EventSource(`${t}/taskupdates`),!0),c(u).addEventListener("task_update",I=>{x(s,JSON.parse(I.data),!0)}),()=>{c(i)&&c(i).close(),c(o)&&c(o).close(),c(u)&&c(u).close()}});function p(C){C.preventDefault();const R=new FormData(C.target),T={id:R.get("id"),name:R.get("name"),start:R.get("start"),end:R.get("end"),priority:R.get("priority")};fetch(`${t}/add_task?id=${T.id}&priority=${T.priority}&name=${T.name}&start=${T.start}&end=${T.end}`).then(I=>I.json()).then(I=>{console.log("Task created:",I),x(f,!1)}).catch(I=>{console.error("Error creating task:",I)})}var g=Oa(),l=Oe(g);{var h=C=>{var R=ga(),T=j(R),I=j(T);se(I,{title:"Add Task",onclick:()=>{x(f,!c(f))},icon:"cuida--x-outline",children:(U,H)=>{var E=pa();tr("submit",E,p),z(U,E)}}),P(T),P(R),z(C,R)};$(l,C=>{c(f)&&C(h)})}var d=B(l,2),m=j(d),y=j(m),_=j(y);se(_,{title:"Speed",children:(C,R)=>{var T=ya(),I=j(T);{var U=E=>{bt(E,{get value(){return c(a).speed},get arrows(){return c(a).speed}})},H=E=>{var J=ma();z(E,J)};$(I,E=>{c(a)?E(U):E(H,!1)})}P(T),z(C,T)}}),P(y);var O=B(y,2),S=j(O);se(S,{title:"Battery",children:(C,R)=>{var T=ba(),I=j(T);{var U=E=>{bt(E,{get value(){return c(a).battery},get arrows(){return c(a).battery}})},H=E=>{var J=wa();z(E,J)};$(I,E=>{c(a)?E(U):E(H,!1)})}P(T),z(C,T)}}),P(O),P(m);var w=B(m,2),b=j(w);se(b,{title:"Tasks",onclick:()=>{x(f,!0)},icon:"cuida--plus-outline",children:(C,R)=>{var T=ka(),I=j(T);{var U=E=>{var J=Ea();zt(J,21,()=>c(s).tasks,Rt,(Yt,ye)=>{var Be=xa(),Fe=j(Be),it=j(Fe),ot=B(it),Ue=j(ot),Gt=j(Ue,!0);P(Ue);var lt=B(Ue,2),Xt=j(lt);P(lt),P(ot),P(Fe);var Kt=B(Fe,2);Kt.__click=[_a,t,ye],P(Be),Te(()=>{ze(it,`${c(ye).id??""} `),ze(Gt,c(ye).name),ze(Xt,`${c(ye).start??""} - ${c(ye).end??""}`)}),z(Yt,Be)}),P(J),z(E,J)},H=E=>{var J=Sa();z(E,J)};$(I,E=>{c(s)?E(U):E(H,!1)})}P(T),z(C,T)}}),P(w),P(d);var K=B(d,2),k=j(K),F=j(k);se(F,{title:"Camera",children:(C,R)=>{var T=St(),I=Oe(T);{var U=H=>{var E=Ta();Te(()=>At(E,"src",`data:image/jpg;base64,${c(n).frame??""}`)),z(H,E)};$(I,H=>{c(n)&&H(U)})}z(C,T)}}),P(k);var re=B(k,2),me=j(re);se(me,{title:"Map",children:(C,R)=>{ha(C,{})}}),P(re),P(K),z(r,g),ge()}er(["click"]);export{La as component};
