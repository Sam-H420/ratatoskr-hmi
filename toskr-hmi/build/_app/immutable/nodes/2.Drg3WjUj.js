import{t as C,s as F,a as D,d as Se,e as Ae}from"../chunks/wixlNtoe.js";import{s as Z,h as $,Z as Ie,_ as Ne,a as De,b as Ce,m as n,l as Le,c as Re,r as ne,d as ee,g as B,$ as Oe,e as pe,f as _e,p as $e,a0 as me,a1 as he,a2 as Me,t as K,a3 as de,a4 as ae,a5 as je,a6 as oe,a7 as se,a8 as He,a9 as le,aa as fe,ab as Pe,ac as qe,ad as ze,ae as Je,af as We,ag as Be,K as ge,ah as te,ai as Ge,Q as E,T as M,R as y,N as re,O as we,q as A,I as G,W as Ve,M as Xe,X as P}from"../chunks/DgjcRy8N.js";import{i as V}from"../chunks/Dd0M2OQj.js";import{t as Ye,W as X}from"../chunks/--kQ1aqw.js";import{i as Fe}from"../chunks/DpalO9RK.js";import{p as Y}from"../chunks/CX4kLPjY.js";function xe(s,e){return e}function Ke(s,e,a,f){for(var v=[],d=e.length,c=0;c<d;c++)Pe(e[c].e,v,!0);var h=d>0&&v.length===0&&a!==null;if(h){var x=a.parentNode;qe(x),x.append(a),f.clear(),H(s,e[0].prev,e[d-1].next)}ze(v,()=>{for(var b=0;b<d;b++){var m=e[b];h||(f.delete(m.k),H(s,m.prev,m.next)),Je(m.e,!h)}})}function ye(s,e,a,f,v,d=null){var c=s,h={flags:e,items:new Map,first:null},x=(e&me)!==0;if(x){var b=s;c=$?Z(Ie(b)):b.appendChild(Ne())}$&&De();var m=null,L=!1,l=Le(()=>{var _=a();return Me(_)?_:_==null?[]:he(_)});Ce(()=>{var _=n(l),t=_.length;if(L&&t===0)return;L=t===0;let g=!1;if($){var k=c.data===Re;k!==(t===0)&&(c=ne(),Z(c),ee(!1),g=!0)}if($){for(var w=null,I,T=0;T<t;T++){if(B.nodeType===8&&B.data===Oe){c=B,g=!0,ee(!1);break}var i=_[T],r=f(i,T);I=be(B,h,w,null,i,r,T,v,e,a),h.items.set(r,I),w=I}t>0&&Z(ne())}$||Qe(_,h,c,v,e,f,a),d!==null&&(t===0?m?pe(m):m=_e(()=>d(c)):m!==null&&$e(m,()=>{m=null})),g&&ee(!0),n(l)}),$&&(c=B)}function Qe(s,e,a,f,v,d,c){var j,q,z,J;var h=(v&He)!==0,x=(v&(le|se))!==0,b=s.length,m=e.items,L=e.first,l=L,_,t=null,g,k=[],w=[],I,T,i,r;if(h)for(r=0;r<b;r+=1)I=s[r],T=d(I,r),i=m.get(T),i!==void 0&&((j=i.a)==null||j.measure(),(g??(g=new Set)).add(i));for(r=0;r<b;r+=1){if(I=s[r],T=d(I,r),i=m.get(T),i===void 0){var S=l?l.e.nodes_start:a;t=be(S,e,t,t===null?e.first:t.next,I,T,r,f,v,c),m.set(T,t),k=[],w=[],l=t.next;continue}if(x&&Ue(i,I,r,v),(i.e.f&ae)!==0&&(pe(i.e),h&&((q=i.a)==null||q.unfix(),(g??(g=new Set)).delete(i))),i!==l){if(_!==void 0&&_.has(i)){if(k.length<w.length){var p=w[0],u;t=p.prev;var R=k[0],O=k[k.length-1];for(u=0;u<k.length;u+=1)ve(k[u],p,a);for(u=0;u<w.length;u+=1)_.delete(w[u]);H(e,R.prev,O.next),H(e,t,R),H(e,O,p),l=p,t=O,r-=1,k=[],w=[]}else _.delete(i),ve(i,l,a),H(e,i.prev,i.next),H(e,i,t===null?e.first:t.next),H(e,t,i),t=i;continue}for(k=[],w=[];l!==null&&l.k!==T;)(l.e.f&ae)===0&&(_??(_=new Set)).add(l),w.push(l),l=l.next;if(l===null)continue;i=l}k.push(i),t=i,l=i.next}if(l!==null||_!==void 0){for(var o=_===void 0?[]:he(_);l!==null;)(l.e.f&ae)===0&&o.push(l),l=l.next;var N=o.length;if(N>0){var Q=(v&me)!==0&&b===0?a:null;if(h){for(r=0;r<N;r+=1)(z=o[r].a)==null||z.measure();for(r=0;r<N;r+=1)(J=o[r].a)==null||J.fix()}Ke(e,o,Q,m)}}h&&je(()=>{var W;if(g!==void 0)for(i of g)(W=i.a)==null||W.apply()}),oe.first=e.first&&e.first.e,oe.last=t&&t.e}function Ue(s,e,a,f){(f&le)!==0&&fe(s.v,e),(f&se)!==0?fe(s.i,a):s.i=a}function be(s,e,a,f,v,d,c,h,x,b){var m=(x&le)!==0,L=(x&We)===0,l=m?L?K(v):de(v):v,_=(x&se)===0?c:de(c),t={i:_,v:l,k:d,a:null,e:null,prev:a,next:f};try{return t.e=_e(()=>h(s,l,_,b),$),t.e.prev=a&&a.e,t.e.next=f&&f.e,a===null?e.first=t:(a.next=t,a.e.next=t.e),f!==null&&(f.prev=t,f.e.prev=t.e),t}finally{}}function ve(s,e,a){for(var f=s.next?s.next.e.nodes_start:a,v=e?e.e.nodes_start:a,d=s.e.nodes_start;d!==f;){var c=Be(d);v.before(d),d=c}}function H(s,e,a){e===null?s.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function ue(s,e,a,f){var v=s.__style;if($||v!==e){var d=Ye(e);(!$||d!==s.getAttribute("style"))&&(d==null?s.removeAttribute("style"):s.style.cssText=d),s.__style=e}return f}var Ze=C('<div class="gauge-abs svelte-1fa4a5t"><div class="gauge-max svelte-1fa4a5t"></div></div>'),ea=C('<div class="gauge svelte-1fa4a5t"><!> <div class="gauge-overflow svelte-1fa4a5t"><div class="gauge-fill gauge-bg svelte-1fa4a5t"></div> <div class="gauge-fill svelte-1fa4a5t"></div> <div class="gauge-white svelte-1fa4a5t"></div> <div class="gauge-value svelte-1fa4a5t"> </div></div></div>');function ce(s,e){ge(e,!1);let a=Y(e,"value",8,0),f=Y(e,"arrows",8,""),v=Y(e,"thresholds",8,"70,90"),d=Y(e,"colors",8,"#525C71,#e8523b"),c=K(),h=K(),x=K();te(()=>(G(v()),G(a()),G(d())),()=>{const g=String(v()).split(","),k=g.indexOf(g.find(I=>a()<parseInt(I,10))),w=String(d()).split(",");A(c,w[k]||w[w.length-1])}),te(()=>G(a()),()=>{A(h,(100-a())*1.8)}),te(()=>G(f()),()=>{A(x,f()?String(f()).split(",").map(g=>parseInt(g)*1.8).filter(g=>g>-1):[])}),Ge(),Fe();var b=ea(),m=E(b);ye(m,1,()=>n(x),xe,(g,k)=>{var w=Ze();re(()=>ue(w,`transform:rotate(${n(k)??""}deg)`)),D(g,w)});var L=M(m,2),l=M(E(L),2),_=M(l,4),t=E(_,!0);y(_),y(L),y(b),re(()=>{ue(l,`transform:rotate(-${n(h)??""}deg);box-shadow: inset 0 0 0 1em ${n(c)??""};`),F(t,a())}),D(s,b),we()}var aa=C('<form class="flex flex-col w-full h-full justify-center items-center p-4 gap-2"><input type="number" name="id" placeholder="Task ID" class="theme-dark-input"> <input type="text" name="name" placeholder="Task Name" class="theme-dark-input"> <input type="text" name="start" placeholder="Start" class="theme-dark-input"> <input type="text" name="end" placeholder="Goal" class="theme-dark-input"> <input type="number" name="priority" placeholder="Priority" class="theme-dark-input"> <button type="submit" class="theme-dark-window-button p-2">Add Task</button></form>'),ta=C('<div class="absolute top-0 left-0 w-full h-full flex justify-center items-center bg-[#242424b4] z-50"><div class="absolute flex justify-center items-center theme-dark-container rounded-md justify-self-center"><!></div></div>'),ra=C("<p>Loading...</p>"),sa=C('<div class="flex" style="font-size: 4em;"><!></div>'),la=C("<p>Loading...</p>"),ia=C('<div class="flex" style="font-size: 4em;"><!></div>'),na=(s,e)=>{fetch(`/api/delete_task?id=${n(e).id}`).then(a=>a.json()).then(a=>{console.log("Task deleted:",a)})},da=C('<li class="flex flex-row w-full justify-between items-center p-2 pl-4 border-b-1 border-[#242424]"><div class="flex flex-row w-full justify-start items-center"> <div class="flex flex-col w-full ml-5"><p> </p> <p class="text-[#747474]"> </p></div></div> <button aria-label="Delete Task" class="theme-dark-window-button"><div class="p-2 flex flex-col justify-center items-center"><span class="cuida--trash-outline"></span></div></button></li>'),oa=C('<ul class="flex flex-col w-full"></ul>'),fa=C("<p>Loading...</p>"),va=C('<div class="flex h-full w-full overflow-y-scroll"><!></div>'),ua=C('<!> <div class="flex flex-col md:w-2/3 md:h-full w-full h-1/3"><div class="flex flex-row md:h-1/2 h-full w-full mb-1"><div class="flex w-1/2 mr-1 justify-center items-center theme-dark-container rounded-md"><!></div> <div class="flex w-1/2 ml-1 justify-center items-center theme-dark-container rounded-md"><!></div></div> <div class="md:flex md:static flex-row h-1/2 w-full mt-1 hidden absolute theme-dark-container rounded-md"><!></div></div>',1);function wa(s,e){ge(e,!0);let a=P(null),f=P(null),v=P(null),d=P(void 0),c=P(void 0),h=P(void 0),x=P(!1);Ve(async()=>{const r=await fetch("/api/motors");A(a,await r.json(),!0);const S=await fetch("/api/frame");A(f,await S.json(),!0);const p=await fetch("/api/tasks");return A(v,await p.json(),!0),A(d,new EventSource("/api/telemetry"),!0),n(d).addEventListener("sensor_update",u=>{A(a,JSON.parse(u.data),!0)}),A(c,new EventSource("/api/videofeed"),!0),n(c).addEventListener("video_feed",u=>{A(f,JSON.parse(u.data),!0)}),A(h,new EventSource("/api/taskupdates"),!0),n(h).addEventListener("task_update",u=>{A(v,JSON.parse(u.data),!0)}),()=>{n(d)&&n(d).close(),n(c)&&n(c).close(),n(h)&&n(h).close()}});function b(r){r.preventDefault();const S=new FormData(r.target),p={id:S.get("id"),name:S.get("name"),start:S.get("start"),end:S.get("end"),priority:S.get("priority")};fetch(`/api/add_task?id=${p.id}&priority=${p.priority}&name=${p.name}&start=${p.start}&end=${p.end}`).then(u=>u.json()).then(u=>{console.log("Task created:",u),A(x,!1)}).catch(u=>{console.error("Error creating task:",u)})}var m=ua(),L=Xe(m);{var l=r=>{var S=ta(),p=E(S),u=E(p);X(u,{title:"Add Task",onclick:()=>{A(x,!n(x))},icon:"cuida--x-outline",children:(R,O)=>{var o=aa();Ae("submit",o,b),D(R,o)}}),y(p),y(S),D(r,S)};V(L,r=>{n(x)&&r(l)})}var _=M(L,2),t=E(_),g=E(t),k=E(g);X(k,{title:"Speed",children:(r,S)=>{var p=sa(),u=E(p);{var R=o=>{ce(o,{get value(){return n(a).speed},get arrows(){return n(a).speed}})},O=o=>{var N=ra();D(o,N)};V(u,o=>{n(a)?o(R):o(O,!1)})}y(p),D(r,p)}}),y(g);var w=M(g,2),I=E(w);X(I,{title:"Battery",children:(r,S)=>{var p=ia(),u=E(p);{var R=o=>{ce(o,{get value(){return n(a).battery},get arrows(){return n(a).battery}})},O=o=>{var N=la();D(o,N)};V(u,o=>{n(a)?o(R):o(O,!1)})}y(p),D(r,p)}}),y(w),y(t);var T=M(t,2),i=E(T);X(i,{title:"Tasks",onclick:()=>{A(x,!0)},icon:"cuida--plus-outline",children:(r,S)=>{var p=va(),u=E(p);{var R=o=>{var N=oa();ye(N,21,()=>n(v).tasks,xe,(Q,j)=>{var q=da(),z=E(q),J=E(z),W=M(J),U=E(W),ke=E(U,!0);y(U);var ie=M(U,2),Ee=E(ie);y(ie),y(W),y(z);var Te=M(z,2);Te.__click=[na,j],y(q),re(()=>{F(J,`${n(j).id??""} `),F(ke,n(j).name),F(Ee,`${n(j).start??""} - ${n(j).end??""}`)}),D(Q,q)}),y(N),D(o,N)},O=o=>{var N=fa();D(o,N)};V(u,o=>{n(v)?o(R):o(O,!1)})}y(p),D(r,p)}}),y(T),y(_),D(s,m),we()}Se(["click"]);export{wa as component};
